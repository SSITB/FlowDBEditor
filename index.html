<!DOCTYPE html>
<html lang="en">
<head>
    <script>
        var vers="0.971";
        var flowdbinit=null;    //can use content (XML) or file path on server side. On client side please use GET 
                                //example: copy tro clipbrd saved flowdb file content and paste to here among `` signs
        var imgs="";//for local
        //var imgs="https://raw.githubusercontent.com/hgabor47/FlowDBEditor/master/";
    </script>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=0.7">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <meta http-equiv="Cache-Control" content="no-cache, no-store, must-revalidate" />
    <meta http-equiv="Pragma" content="no-cache" />
    <meta http-equiv="Expires" content="0" />
    <title>FlowDBEditor 4</title>
     <!-- Bootstrap CSS -->
     <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/css/bootstrap.min.css" integrity="sha384-Gn5384xqQ1aoWXA+058RXPxPg6fy4IWvTNh0E263XmFcJlSAwiGgFAW/dAiS6JXm" crossorigin="anonymous">
     <link href="https://stackpath.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css" rel="stylesheet" integrity="sha384-wvfXpqpZZVQGK6TAh5PVlGOfQNHSoD2xbE+QkPxCAFlNEevoEH3Sl0sibVcOQVnN" crossorigin="anonymous">
    <style>

        @import url('https://fonts.googleapis.com/css?family=Work+Sans:200,400');
        * {
            font-family: "Work Sans";   
            font-size: 1rem;    
                              
        }
        #area {
            display: flex;
        }
        #AIHelp {
            z-index: 200;
            position: absolute;
            padding:16px;
            top:10%;
            left:10%;
            height:60%;
            width:70%;
            background-color: rgba(255, 231, 166, 0.7);
            border:black 1px dotted;
            color: rgb(0, 29, 29);
            visibility: hidden;
        }
        .AITitle {
            color: rgb(153, 105, 0);
            font-weight: 800;
            font-size: 1.4rem;            
        }
        .AIText {
            color:rgb(44, 30, 0);
            font-size: 1rem;
        }
        #news {
            z-index: 200;
            position: absolute;
            padding:16px;
            top:10%;
            left:10%;
            height:50%;
            width:50%;
            background-color: rgba(204, 204, 204, 0.897);
            border:black 1px dotted;
            color: rgb(0, 29, 29);
            visibility: hidden;
        }
        #defaultcontent {
            z-index: 200;
            position: absolute;
            padding:16px;
            top:10%;
            left:10%;
            
            width:50%;
            background-color: rgba(209, 196, 180, 0.897);
            border:black 2px dotted;
            color: rgb(0, 29, 29);
            visibility: hidden;
            cursor:pointer;
        }
        button {
            height:1.8rem;
            margin:0.1rem;
            width:inherit;            
        }
        label {
            font-size: 0.6rem;
            height:0.6rem;
            width:100%;
        }
        .display-5 {
            font-size: 2.7rem;
            font-weight: 300;
            line-height: 1.4;
        }
        .display-6 {
            font-size: 1.5rem;
            font-weight: 300;
            line-height: 1;
        }
        #flowdbeditor {
            width:2400px;
            height:2400px;            
            padding: 0; margin: 0;
        }
        .flow_flowmode{
            color: black;
        }
        .flow_constraintmode{
            color:rgb(32, 0, 173);
        }

        .modeContraint {
            background-color: blue;
        }
        .green {
            background-color: greenyellow;
        }
        .s100{
            width:100%;
        }
        .flow_edit{
            position: absolute;
            padding:16px;
            top:100px;
            left:100px;         
            background-color: rgba(233, 233, 233, 0.89);
            border: 1px rgb(88, 88, 88) dotted;
        }
        .flow_browse{
            position: absolute;
            padding:16px;
            top:100px;
            left:100px;
            height:80%;
            width:90%;
            overflow: auto;
            background-color: rgba(233, 233, 233, 0.89);
            border: 1px rgb(88, 88, 88) dotted;
        }
        .flow_context {
            font-size: 1.3rem;
            font-family: FontAwesome;
            font-weight: 400;
            cursor:pointer;   
            height:1.5rem;                  
        }
        .red {
            color: red;
        }
        .flow_tables {
            font-size: 1.1rem;
            font-weight: 800;
            cursor:pointer;   
            height:1.5rem;                  
        }
        .flow_browse_header {
            position: relative;
            top:0px;    
            padding:16px;
            background-color: rgba(105, 105, 148, 0.322);        
        }
        
        .flow_tables_color1 {
            background-color: rgb(192, 192, 192);
            
        }
        .flow_tables_color2 {
            background-color: rgb(175, 175, 175);
        }
        .flow_tablegroup {
            cursor: all-scroll;
        }
        .flow_fields {
            font-size: 1rem;
            cursor:pointer;
        }
        .flow_fields_noevent {
            cursor: all-scroll;
            font-size: 1rem;            
        }
        .flow_fields_color1 {
            background-color:rgb(160, 160, 160);
            fill:rgb(156, 156, 156);
        }
        .flow_fields_color2 {
            background-color:rgb(207, 207, 207);
            fill:rgb(192, 192, 192);
        }
        .flow_fields_color3 {
            fill:rgba(127, 127, 127,0.3);
        }
        .flow_fields_color4 {
            fill:rgba(127, 127, 127,0.0);
        }
        .flow_constraints{
            font-size: 0.7rem;
        }
        .flow_constraints_color1{
            background-color:rgb(161, 161, 161);                        
        }
        .flow_constraints_color2{
            background-color:rgb(204, 204, 204);                      
        }
        
        .flow_line {
            stroke: rgb(59, 60, 68);
            stroke-width: 2;
        }
        .flow_line_hidden {
            stroke: rgba(59, 60, 68,0);
            stroke-width: 0;
        }
        .flow_line_start {
            stroke: rgb(29, 40, 126);
            stroke-width: 4;
        }
        .flow_line_end {
            stroke: rgb(255, 174, 0);
            stroke-width: 2;
        }
        .flow_line_start_hidden {
            stroke: rgba(29, 40, 126,0);
            stroke-width: 0;
        }
        .flow_line_end_hidden {
            stroke: rgba(255, 174, 0,0);
            stroke-width: 0;
        }
        .flow_rec_header{
            font-weight: 900;
        }
        .flow_clipboard {
            background-color: rgb(255, 219, 174);           
            position: absolute;
            padding:16px;
            top:100px;
            left:100px;            
            border: 1px rgb(88, 88, 88) dotted;
        }

        .commandbutton {
            width:"100%";
            cursor:pointer;
        }
        #help {
            color: green;
            height:1.8rem;
        }
        #yesno {
            visibility: hidden;
            z-index: 300;
            position: absolute;
            padding:32px;
            top:200px;
            left:200px;  
            width:300px;
            height:180px;       
            background-color: rgba(113, 170, 96, 0.89);
            border: 1px rgb(88, 197, 74) solid;            
            font-size: 2.2rem;
        }
        #donate {
            color:black;
            font-weight: 500;
            font-size: 0.6rem;
            padding-left:60px;
            padding-right:60px;
            background-color: rgba(211, 211, 211, 0.472);
        }
        .micro {
            font-size:0.6rem;
        }
        #smile {
            visibility: hidden;
            opacity:0.5;
            z-index: 310;
            left:300px;
            position: absolute;            
        }
    </style>
    <script>
        var news = [             
            [112,"10.Control by VOICE :) Hungarian and English"]
            ,[111,"9.Built in default flow load option"]
            ,[109,"8.Filtered linked combobox able to setup by Field editor window"]
            ,[108,"7. Touch is working on tablet or mobile and Zoom implemented by a button"]
            ,[106,"6.Bug fixes (can't able to insert new record to table content."]
            ,[104,"5.Copy from Excel or another source to clipboard. Press CTRL+V on FlowDBEditor and create a new table or fill a table from clipboard."]
            ,[103,"4.Press CopyToURL button for copy to clipboard link with data"]
            ,[102,"3.You can export to SVG, MySQL"]
            ,[101,"2.You can Save to browser memory (and Load from)"]
            ,[100,"1.You can Save to file and load from file later"]
            ];

        function cmdin(a){
            a.style.height="auto";
        }
        function cmdout(a){
            a.style.height="4rem";
        }
        function blur1(){
            var but=document.getElementById("flowdbload");
            if (but.activ){
                //document.getElementById("help").innerHTML="blur";
                FlowDBLoad(but);
            }
        }
        window.onload=function(){            
            v = document.getElementById("vers");
            v.innerHTML="v"+vers;
            document.title+="."+vers;
            var img=document.getElementById("donateimg");
            img.setAttribute("src",imgs+"donate.jpg");
            img.style.height="2rem";
            flowdbeditor_onload();
        }

    </script>
</head>
<body>   
    <img id="smile" src="smile.gif" title="smile" />
    <div id="AIHelp">
        <div style="height:80%;overflow:auto;">
            <h1>A.I. Help</h1>
            <button onclick="AIHelp('en')">English</button>
            <button onclick="AIHelp('hu')">Hungarian</button>
            <ul id="aiul">
                
            </ul>
        </div>
        <button  onclick='{this.parentElement.style.visibility="hidden"}'>OK</button>        
    </div>
    <div id="defaultcontent" onclick="{this.style.visibility='hidden'}">
        <div class="display-3">Default content changed on server and loaded.</div>
        <div class="display-5">Your last saved content not modified!</div>
        <br>
        <div>Please use LOAD for access your last stored flow or store this with SAVE (and overwrite your last flow).</div>
        <div>If you MODIFY this default loaded content this will automatically store to TEMP (and didn't overwrite last SAVEd).</div>
        <div>If you press F5 then reload the latest TEMP flow (and this content will disapear and if you'd like then use LoadDefault button for view it)</div>
    </div>
    <div id="yesno" onclick="{speechlevel=0;this.style.visibility='hidden';}">YES or NO?</div>
    <div id="news">
        <div style="height:80%;overflow:auto;">
            <h1>News</h1>
            <ul id="newsul">
            
            </ul>
        </div>
        <button  onclick='{this.parentElement.style.visibility="hidden"}'>OK</button>
    </div>
    <div id="mainarea" class="container-fluid">
        <span class="display-5" >FlowDBEditor4</span><b id="vers"></b><i> for CHROME and SVG compatible browsers</i>
        <a href="https://www.paypal.com/cgi-bin/webscr?cmd=_donations&business=hgabor47%40gmail%2ecom&lc=AL&item_number=flowdbeditor&currency_code=USD&bn=PP%2dDonationsBF%3abtn_donateCC_LG%2egif%3aNonHosted"><span id="donate"><img src="" id="donateimg"></span></a>
        <div id="help" onclick="this.innerHTML=''">Write records with right click on created tables :)</div>
        <div id="area" class="row">    
            <div class="col-2">   
                <div id="menu" class="flex-column p-2" style='min-width:200px;overflow:hidden;height:auto;' onmouseover="cmdin(this)" onmouseout="cmdout(this)">
                    <div class="flow_tables">CommandPanel
                        <i style="font-size:16px" class="fa">&#xf103;</i>
                    </div>
                    <button class="commandbutton" onclick="{this.style.color='#ff0000';AI()}" class="fa" style="font-family: FontAwesome;" >&#xf130;<span class="micro">A.I.</span></button> 
                    <button class="commandbutton" onclick="Save()">Save</button>
                    <button class="commandbutton" onclick="Load()">Load</button>
                    <button class="commandbutton" onclick="Load('alma')">Clear</button>
                    <button id="loadserverdefault" class="commandbutton" style="display:none;" onclick="LoadServerDefault(true)">LoadServerDefault</button>
                    <form style="display:none;"><input id="filename" class="commandbutton" type='file' accept='text/plain' ></form>
                    <button class="commandbutton" onclick="FlowDBSave('print')">SaveToFile</button>                                        
                    <button class="commandbutton" id="flowdbload" onclick="FlowDBLoad(this)" onmouseout="blur1()">LoadFromFile</button>
                    <button class="commandbutton" onclick="FlowDBCopy('print')">CopyToURL</button>                                        
                    <button class="commandbutton" onclick="savetosvgfile('print','flowdbeditor')">Download SVG</button>
                    <button class="commandbutton" onclick="mySQL('print')">Download MySQL</button>
                    <button class="commandbutton" onclick="newsdialog(true)">News</button>
                    <button class="commandbutton" onclick="zoom()">Zoom</button>                                        
                    
                    <button class="commandbutton" onclick="{var cmd = prompt('Command','exit');setTimeout(function(){robot(cmd)},2000);}">A.I.TEST</button>
                    <div id="modules"></div>
                    <!-- <a target="_blank" style="visibility:hidden;" id="print" download="file.txt" href="">RightClickforDownload</a> -->
                </div>
                <div class="flex-column p-2"> 
                    <span class="s100 display-6">Tables</span>
                    <button  onclick="sortTables()" style="font-size:16px" class="fa">&#xf036;</button>
                    <button class="s100" onclick="newTable()">New</button>
                    <div id="tables" class="s100">

                    </div>
                </div>
                <div class="flex-column p-2"> 
                        <span class="s100 display-6">Fields</span>
                    <button class="s100" onclick="newField()">New</button>
                    <div id="fields" class="s100">
                        
                    </div>
                </div>
                <div class="flex-column p-2"> 
                        <span class="s100 display-6">Constraints</span>
                        <button id="newconstraint" class="s100 flow_flowmode" onclick="newConstraint(this)">Start link</button>
                        <div id="constraints" class="s100">
                            
                        </div>
                </div>
            </div>
            
            <div class="col-10">
                <svg id="flowdbeditor" style="background-color: white" width="2400" height="2400" viewBox="0 0 2400 2400">
                    <defs>
                        <linearGradient id="e" x1="40" y1="210" x2="460" y2="210" gradientUnits="objectBoundingBox">
                            <stop stop-color="steelblue" offset="0" />
                            <stop stop-color="red" offset="1" />
                        </linearGradient>
                    </defs>                    
                </svg>  
            </div>
        </div>    
    </div>
        <!-- jQuery first, then Popper.js, then Bootstrap JS -->
    <script src="https://code.jquery.com/jquery-3.2.1.slim.min.js" integrity="sha384-KJ3o2DKtIkvYIK3UENzmM7KCkRr/rE9/Qpg6aAZGJwFDMVNA/GpGFF93hXpG5KkN" crossorigin="anonymous"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.12.9/umd/popper.min.js" integrity="sha384-ApNbgh9B+Y1QKtv3Rn7W3mgPxhU9K/ScQsAP7hUibX39j7fakFPskvXusvfa0b4Q" crossorigin="anonymous"></script>
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/js/bootstrap.min.js" integrity="sha384-JZR6Spejh4U02d8jOt6vLEHfe/JQGiRRSQQxSfFWpi1MquVdAyjUar5+76PVCmYl" crossorigin="anonymous"></script>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>    
    
    <script src="./flowdbeditor2.js"></script>
</body>
</html>
